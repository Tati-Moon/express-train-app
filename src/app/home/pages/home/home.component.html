<div class="search-container">
    <form [formGroup]="form" class="search-form" (ngSubmit)="onSearch()">
        <div class="form-group">
            <label for="fromCity">From City:</label>

            <p-dropdown
                [options]="getStationCities()"
                [formControlName]="fields.FROM_CITY"
                optionLabel="name"
                [showClear]="true"
                [checkmark]="true"
                placeholder="Select a City"
            />
        </div>
        <div class="form-group">
            <label for="toCity">To City:</label>
            <p-dropdown
                [options]="getStationCities()"
                [formControlName]="fields.TO_CITY"
                optionLabel="name"
                [showClear]="true"
                [checkmark]="true"
                placeholder="Select a City"
            />
        </div>
        <div class="form-group">
            <label for="date">Date:</label>
            <input id="date" type="date" [formControlName]="fields.DATE" name="date" />
        </div>

        <button (onClick)="onSearch()">Search</button>
    </form>
</div>

<div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
</div>

<div *ngIf="!errorMessage && searchResults">
    <pre>{{ searchResults | json }}</pre>
    <!-- <div *ngFor="let result of searchResults.routes">
        <h2>From: {{ result.from.city }} To: {{ result.to.city }}</h2>
        <p>Routes available: {{ result.routes.length }}</p>

        <div *ngFor="let route of result.routes">
            <h3>Route ID: {{ route.id }}</h3>
            <p>Stations: {{ route.path.join(' -> ') }}</p>
            <p>Carriages: {{ route.carriages.join(', ') }}</p>

            <div *ngFor="let schedule of route.schedule">
                <h4>Ride ID: {{ schedule.rideId }}</h4>

                <div *ngFor="let segment of schedule.segments">
                    <p>Time: {{ segment.time[0] }} - {{ segment.time[1] }}</p>
                    <p>Price: {{ segment.price['dynamic-carriage-type-1'] }}</p>
                    <p>Occupied Seats: {{ segment.occupiedSeats.join(', ') }}</p>
                </div>
            </div>
        </div>
    </div> -->
</div>
