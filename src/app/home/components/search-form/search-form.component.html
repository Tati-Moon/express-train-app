<div class="search-container">
    <form [formGroup]="form" class="card search-form" (ngSubmit)="onSearch()">
        <div class="search-inputs">
            <div class="search-input">
                <p-dropdown
                    [options]="getStationCities()"
                    [formControlName]="fields.FROM_CITY"
                    optionLabel="name"
                    placeholder="{{ 'SEARCH_PAGE.FIELDS.FROM.PLACEHOLDER' | translate }}"
                    class="ng-dirty w-full"
                    styleClass="w-full"
                    [showClear]="true"
                    [filter]="true"
                    filterBy="name"
                    [required]="true"
                >
                    <ng-template pTemplate="city" let-city>
                        <div>{{ city.city }}</div>
                    </ng-template>
                </p-dropdown>
            </div>

            <div class="revers-button">
                <p-button
                    icon="pi pi-sync"
                    [rounded]="true"
                    [outlined]="true"
                    size="small"
                    (click)="reverseInputs()"
                    [disabled]="form.get([this.fields.FROM_CITY])?.invalid || form.get([this.fields.TO_CITY])?.invalid"
                ></p-button>
            </div>
            <div class="search-input">
                <p-dropdown
                    [options]="getStationCities()"
                    [formControlName]="fields.TO_CITY"
                    optionLabel="name"
                    autoWidth="false"
                    placeholder="{{ 'SEARCH_PAGE.FIELDS.TO.PLACEHOLDER' | translate }}"
                    class="ng-dirty w-full"
                    styleClass="w-full"
                    [showClear]="true"
                    [filter]="true"
                    filterBy="name"
                    [required]="true"
                >
                    <ng-template pTemplate="city" let-city>
                        <div>{{ city.city }}</div>
                    </ng-template>
                </p-dropdown>
            </div>
        </div>
        <div class="search-calendar">
            <p-calendar
                id="date"
                type="date"
                class="ng-dirty w-full date-input mr-2"
                [iconDisplay]="'input'"
                [showIcon]="true"
                dateFormat="yy-mm-dd"
                inputId="date"
                [minDate]="currentDate"
                [formControlName]="fields.DATE"
                name="date"
                styleClass="w-full"
                placeholder="{{ 'SEARCH_PAGE.FIELDS.CALENDAR.PLACEHOLDER1' | translate }}"
                [required]="true"
            >
            </p-calendar>

            @if (form.get(fields.DATE)?.valid) {
                <p-calendar
                    id="date"
                    [timeOnly]="true"
                    [showTime]="true"
                    [showIcon]="true"
                    type="date"
                    class="time-input"
                    [iconDisplay]="'input'"
                    timeFormat="HH:mm"
                    inputId="date"
                    [formControlName]="fields.TIME"
                    name="date"
                    styleClass="w-full"
                    placeholder="{{ 'SEARCH_PAGE.FIELDS.CALENDAR.PLACEHOLDER2' | translate }}"
                >
                    <ng-template pTemplate="inputicon" let-clickCallBack="clickCallBack">
                        <i class="pi pi-clock pointer-events-none" (click)="clickCallBack($event)"></i>
                    </ng-template>
                </p-calendar>
            }
        </div>
        <div class="search-button">
            <p-button
                [disabled]="form.invalid"
                styleClass="w-full"
                class="search-btn"
                (onClick)="onSearch()"
                label="{{ 'BUTTONS.SEARCH' | translate }}"
            >
            </p-button>
        </div>
    </form>
</div>
