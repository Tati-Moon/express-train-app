<div *ngIf="rides && rides.schedule.length > 0; else noSchedule">
    <ul>
        <div *ngFor="let schedule of rides.schedule">
            <div *ngIf="schedule.segments.length > 0">
                <p-table [value]="rides.path" class="p-table" [tableStyle]="{ 'min-width': '50rem' }">
                    <ng-template pTemplate="header">
                        <tr>
                            Ride
                            {{
                                schedule.rideId
                            }}

                            <p-button
                                icon="pi pi-trash"
                                severity="danger"
                                (click)="onDeleteRide(schedule.rideId)"
                                [rounded]="true"
                                [text]="true"
                                [raised]="true"
                            ></p-button>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-path let-i="rowIndex">
                        <tr>
                            <td *ngIf="getStation(path) | async as station; else noStation">
                                {{ station.city }}
                            </td>
                            <ng-template #noStation>
                                <td>
                                    <b>{{ path }}</b>
                                </td>
                            </ng-template>
                            <td>{{ i }}</td>
                            <td>
                                <app-ride-time-item
                                    [index]="i"
                                    [schedule]="schedule"
                                    [editTimeIndex]="editTimeIndex"
                                    [selectedRideId]="schedule.rideId"
                                    (editTimes)="onEditTimes(i, schedule)"
                                    (saveTimes)="onSaveTimes($event)"
                                ></app-ride-time-item>
                            </td>

                            @if (i !== schedule.segments.length) {
                                <td>
                                    <app-ride-price-item
                                        [index]="i"
                                        [schedule]="schedule"
                                        [editPriceIndex]="editPriceIndex"
                                        [selectedRideId]="schedule.rideId"
                                        (editPrices)="onEditPrices(i, schedule)"
                                        (savePrices)="onSavePrices($event)"
                                    ></app-ride-price-item>
                                </td>
                            } @else {
                                <td></td>
                                <td></td>
                            }
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="5">emptymessage</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </ul>
</div>
<ng-template #noSchedule>
    <div class="card">
        <div class="text-center">
            <p>{{ 'ADMIN.NO_RIDE' | translate }}</p>
        </div>
    </div>
</ng-template>
